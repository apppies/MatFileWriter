(()=>{var L=Uint8Array,D=Uint16Array,sr=Int32Array,or=new L([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hr=new L([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vr=new L([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gr=function(i,n){for(var r=new D(31),e=0;e<31;++e)r[e]=n+=1<<i[e-1];for(var t=new sr(r[30]),e=1;e<30;++e)for(var a=r[e];a<r[e+1];++a)t[a]=a-r[e]<<5|e;return{b:r,r:t}},Ar=gr(or,2),br=Ar.b,nr=Ar.r;br[28]=258,nr[258]=28;var Tr=gr(hr,0),Rr=Tr.b,yr=Tr.r,ar=new D(32768);for(y=0;y<32768;++y)R=(y&43690)>>1|(y&21845)<<1,R=(R&52428)>>2|(R&13107)<<2,R=(R&61680)>>4|(R&3855)<<4,ar[y]=((R&65280)>>8|(R&255)<<8)>>1;var R,y,Y=function(i,n,r){for(var e=i.length,t=0,a=new D(n);t<e;++t)i[t]&&++a[i[t]-1];var o=new D(n);for(t=1;t<n;++t)o[t]=o[t-1]+a[t-1]<<1;var l;if(r){l=new D(1<<n);var h=15-n;for(t=0;t<e;++t)if(i[t])for(var u=t<<4|i[t],s=n-i[t],v=o[i[t]-1]++<<s,m=v|(1<<s)-1;v<=m;++v)l[ar[v]>>h]=u}else for(l=new D(e),t=0;t<e;++t)i[t]&&(l[t]=ar[o[i[t]-1]++]>>15-i[t]);return l},j=new L(288);for(y=0;y<144;++y)j[y]=8;var y;for(y=144;y<256;++y)j[y]=9;var y;for(y=256;y<280;++y)j[y]=7;var y;for(y=280;y<288;++y)j[y]=8;var y,Q=new L(32);for(y=0;y<32;++y)Q[y]=5;var y,Fr=Y(j,9,0);var zr=Y(Q,5,0);var wr=function(i){return(i+7)/8|0},dr=function(i,n,r){return(n==null||n<0)&&(n=0),(r==null||r>i.length)&&(r=i.length),new L(i.subarray(n,r))};var Z=function(i,n,r){r<<=n&7;var e=n/8|0;i[e]|=r,i[e+1]|=r>>8},J=function(i,n,r){r<<=n&7;var e=n/8|0;i[e]|=r,i[e+1]|=r>>8,i[e+2]|=r>>16},tr=function(i,n){for(var r=[],e=0;e<i.length;++e)i[e]&&r.push({s:e,f:i[e]});var t=r.length,a=r.slice();if(!t)return{t:Ir,l:0};if(t==1){var o=new L(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(N,F){return N.f-F.f}),r.push({s:-1,f:25001});var l=r[0],h=r[1],u=0,s=1,v=2;for(r[0]={s:-1,f:l.f+h.f,l,r:h};s!=t-1;)l=r[r[u].f<r[v].f?u++:v++],h=r[u!=s&&r[u].f<r[v].f?u++:v++],r[s++]={s:-1,f:l.f+h.f,l,r:h};for(var m=a[0].s,e=1;e<t;++e)a[e].s>m&&(m=a[e].s);var g=new D(m+1),A=ir(r[s-1],g,0);if(A>n){var e=0,f=0,T=A-n,E=1<<T;for(a.sort(function(F,I){return g[I.s]-g[F.s]||F.f-I.f});e<t;++e){var O=a[e].s;if(g[O]>n)f+=E-(1<<A-g[O]),g[O]=n;else break}for(f>>=T;f>0;){var H=a[e].s;g[H]<n?f-=1<<n-g[H]++-1:++e}for(;e>=0&&f;--e){var b=a[e].s;g[b]==n&&(--g[b],++f)}A=n}return{t:new L(g),l:A}},ir=function(i,n,r){return i.s==-1?Math.max(ir(i.l,n,r+1),ir(i.r,n,r+1)):n[i.s]=r},pr=function(i){for(var n=i.length;n&&!i[--n];);for(var r=new D(++n),e=0,t=i[0],a=1,o=function(h){r[e++]=h},l=1;l<=n;++l)if(i[l]==t&&l!=n)++a;else{if(!t&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(t),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(t);a=1,t=i[l]}return{c:r.subarray(0,e),n}},W=function(i,n){for(var r=0,e=0;e<n.length;++e)r+=i[e]*n[e];return r},xr=function(i,n,r){var e=r.length,t=wr(n+2);i[t]=e&255,i[t+1]=e>>8,i[t+2]=i[t]^255,i[t+3]=i[t+1]^255;for(var a=0;a<e;++a)i[t+a+4]=r[a];return(t+4+e)*8},mr=function(i,n,r,e,t,a,o,l,h,u,s){Z(n,s++,r),++t[256];for(var v=tr(t,15),m=v.t,g=v.l,A=tr(a,15),f=A.t,T=A.l,E=pr(m),O=E.c,H=E.n,b=pr(f),N=b.c,F=b.n,I=new D(19),p=0;p<O.length;++p)++I[O[p]&31];for(var p=0;p<N.length;++p)++I[N[p]&31];for(var c=tr(I,7),U=c.t,q=c.l,S=19;S>4&&!U[vr[S-1]];--S);var P=u+5<<3,z=W(t,j)+W(a,Q)+o,d=W(t,m)+W(a,f)+o+14+3*S+W(I,U)+2*I[16]+3*I[17]+7*I[18];if(h>=0&&P<=z&&P<=d)return xr(n,s,i.subarray(h,h+u));var M,w,C,G;if(Z(n,s,1+(d<z)),s+=2,d<z){M=Y(m,g,0),w=m,C=Y(f,T,0),G=f;var V=Y(U,q,0);Z(n,s,H-257),Z(n,s+5,F-1),Z(n,s+10,S-4),s+=14;for(var p=0;p<S;++p)Z(n,s+3*p,U[vr[p]]);s+=3*S;for(var B=[O,N],K=0;K<2;++K)for(var X=B[K],p=0;p<X.length;++p){var k=X[p]&31;Z(n,s,V[k]),s+=U[k],k>15&&(Z(n,s,X[p]>>5&127),s+=X[p]>>12)}}else M=Fr,w=j,C=zr,G=Q;for(var p=0;p<l;++p){var x=e[p];if(x>255){var k=x>>18&31;J(n,s,M[k+257]),s+=w[k+257],k>7&&(Z(n,s,x>>23&31),s+=or[k]);var $=x&31;J(n,s,C[$]),s+=G[$],$>3&&(J(n,s,x>>5&8191),s+=hr[$])}else J(n,s,M[x]),s+=w[x]}return J(n,s,M[256]),s+w[256]},Cr=new sr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ir=new L(0),Lr=function(i,n,r,e,t,a){var o=a.z||i.length,l=new L(e+o+5*(1+Math.ceil(o/7e3))+t),h=l.subarray(e,l.length-t),u=a.l,s=(a.r||0)&7;if(n){s&&(h[0]=a.r>>3);for(var v=Cr[n-1],m=v>>13,g=v&8191,A=(1<<r)-1,f=a.p||new D(32768),T=a.h||new D(A+1),E=Math.ceil(r/3),O=2*E,H=function(er){return(i[er]^i[er+1]<<E^i[er+2]<<O)&A},b=new sr(25e3),N=new D(288),F=new D(32),I=0,p=0,c=a.i||0,U=0,q=a.w||0,S=0;c+2<o;++c){var P=H(c),z=c&32767,d=T[P];if(f[z]=d,T[P]=z,q<=c){var M=o-c;if((I>7e3||U>24576)&&(M>423||!u)){s=mr(i,h,0,b,N,F,p,U,S,c-S,s),U=I=p=0,S=c;for(var w=0;w<286;++w)N[w]=0;for(var w=0;w<30;++w)F[w]=0}var C=2,G=0,V=g,B=z-d&32767;if(M>2&&P==H(c-B))for(var K=Math.min(m,M)-1,X=Math.min(32767,c),k=Math.min(258,M);B<=X&&--V&&z!=d;){if(i[c+C]==i[c+C-B]){for(var x=0;x<k&&i[c+x]==i[c+x-B];++x);if(x>C){if(C=x,G=B,x>K)break;for(var $=Math.min(B,x-2),lr=0,w=0;w<$;++w){var _=c-B+w&32767,Er=f[_],fr=_-Er&32767;fr>lr&&(lr=fr,d=_)}}}z=d,d=f[z],B+=z-d&32767}if(G){b[U++]=268435456|nr[C]<<18|yr[G];var ur=nr[C]&31,cr=yr[G]&31;p+=or[ur]+hr[cr],++N[257+ur],++F[cr],q=c+C,++I}else b[U++]=i[c],++N[i[c]]}}for(c=Math.max(c,q);c<o;++c)b[U++]=i[c],++N[i[c]];s=mr(i,h,u,b,N,F,p,U,S,c-S,s),u||(a.r=s&7|h[s/8|0]<<3,s-=7,a.h=T,a.p=f,a.i=c,a.w=q)}else{for(var c=a.w||0;c<o+u;c+=65535){var rr=c+65535;rr>=o&&(h[s/8|0]=u,rr=o),s=xr(h,s+1,i.subarray(c,rr))}a.i=o}return dr(l,0,e+wr(s)+t)};var Ur=function(){var i=1,n=0;return{p:function(r){for(var e=i,t=n,a=r.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)t+=e+=r[o];e=(e&65535)+15*(e>>16),t=(t&65535)+15*(t>>16)}i=e,n=t},d:function(){return i%=65521,n%=65521,(i&255)<<24|(i&65280)<<8|(n&255)<<8|n>>8}}},Mr=function(i,n,r,e,t){if(!t&&(t={l:1},n.dictionary)){var a=n.dictionary.subarray(-32768),o=new L(a.length+i.length);o.set(a),o.set(i,a.length),i=o,t.w=a.length}return Lr(i,n.level==null?6:n.level,n.mem==null?t.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+n.mem,r,e,t)};var Sr=function(i,n,r){for(;r;++n)i[n]=r,r>>>=8};var Br=function(i,n){var r=n.level,e=r==0?0:r<6?1:r==9?3:2;if(i[0]=120,i[1]=e<<6|(n.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,n.dictionary){var t=Ur();t.p(n.dictionary),Sr(i,2,t.d())}};function Dr(i,n){n||(n={});var r=Ur();r.p(i);var e=Mr(i,n,n.dictionary?6:2,4);return Br(e,n),Sr(e,e.length-4,r.d()),e}var kr=typeof TextDecoder<"u"&&new TextDecoder,Or=0;try{kr.decode(Ir,{stream:!0}),Or=1}catch{}var Nr=class{matFile=[];constructor(){this.matFile=[],this.matFile.push(...this.createMatFileHeader())}compressionEnabled=!0;get Compression(){return this.compressionEnabled}set Compression(n){this.compressionEnabled=n}addVariable(n,r){this.matFile.push(...this.createMatArray(r,n,!0))}sizeOfDataType(n){switch(n){case 1:case 2:return 1;case 3:case 4:return 2;case 7:case 5:case 6:return 4;case 9:case 12:case 13:return 8;default:break}return 0}createMatFileHeader(){let n=new Uint8Array(116),r=new Uint8Array(8),e=new Uint16Array(2),a=`MATLAB 5.0 MAT-file, Created using MatFileWriter on ${new Date().toISOString()}`;return Array.from(a).forEach((o,l)=>n[l]=o.charCodeAt(0)),e[0]=256,e[1]=19785,[n,r,e]}getMatDataTypeFromTypedArray(n){let r;switch(n.constructor.name){case"Int8Array":r=1;break;case"Uint8Array":r=2;break;case"Int16Array":r=3;break;case"Uint16Array":r=4;break;case"Int32Array":r=5;break;case"Uint32Array":r=6;break;case"BigInt64Array":r=12;break;case"BigUint64Array":r=13;break;case"Float32Array":r=7;break;case"Float64Array":default:r=9;break}return r}getMatArrayTypeFromTypedArray(n){let r;switch(n.constructor.name){case"Int8Array":r=8;break;case"Uint8Array":r=9;break;case"Int16Array":r=10;break;case"Uint16Array":r=11;break;case"Int32Array":r=12;break;case"Uint32Array":r=13;break;case"BigInt64Array":r=14;break;case"BigUint64Array":r=15;break;case"Float32Array":r=7;break;case"Float64Array":default:r=6;break}return r}createDataElementFromTypedArray(n,r=0){Array.isArray(n)||(n=[n]),r==0&&(r=this.getMatDataTypeFromTypedArray(n[0]));let e=n.reduce((h,u)=>h+u.byteLength,0),t;e>0&&e<=4?(t=new Uint16Array(2),t[0]=r,t[1]=e):(t=new Uint32Array(2),t[0]=r,t[1]=e);let a=t.byteLength+e,o=Math.ceil(a/8)*8,l=new Uint8Array(o-a);return[t,...n,l]}createDataElementFromNumbers(n,r){Array.isArray(r)||(r=[r]);let e;switch(n){case 1:e=new Int8Array(r.length);break;case 2:e=new Uint8Array(r.length);break;case 3:e=new Int16Array(r.length);break;case 4:e=new Uint16Array(r.length);break;case 5:e=new Int32Array(r.length);break;case 6:e=new Uint32Array(r.length);break;case 12:e=new BigInt64Array(r.length);break;case 13:e=new BigUint64Array(r.length);break;case 7:e=new Float32Array(r.length);break;case 9:default:e=new Float64Array(r.length);break}return r.forEach((t,a)=>e[a]=t),this.createDataElementFromTypedArray(e,n)}stringToUtf8(n){return new TextEncoder().encode(n)}getSmallestDataType(n){let r=0,e=0,t=!0,a=!1;if(n.forEach(u=>{typeof u=="number"&&(a=!0,u<r&&(r=u),u>e&&(e=u),t&&(t=Number.isInteger(u)))}),a==!1)return 9;let o=Math.min(Math.abs(r),e),l=Math.max(Math.abs(r),e),h=9;return t?r==0&&l<=255?h=2:r>=-128&&e<=127?h=1:r==0&&l<=65535?h=4:r>=-32768&&e<=32767?h=3:r==0&&l<=4294967295?h=6:r>=-2147483648&&e<=2147483647&&(h=5):h=9,h}createNumericArray(n,r,e=[]){let t=[],a=new Uint32Array(2);a[0]=14,t.push(a);let o=0,l=6;this.isTypedArray(r)&&(l=this.getMatArrayTypeFromTypedArray(r));let h=this.createDataElementFromNumbers(6,[(o<<8)+l,0]);t.push(...h);let u=this.createDataElementFromNumbers(5,[1,r.length]);t.push(...u);let s=this.createDataElementFromTypedArray(this.stringToUtf8(n),1);t.push(...s);let v=9;if(ArrayBuffer.isView(r)||(v=this.getSmallestDataType(r)),Array.isArray(e)&&e.length>0&&(v=Math.max(v,this.getSmallestDataType(e))),ArrayBuffer.isView(r)){let m=this.createDataElementFromTypedArray(r);t.push(...m)}else{let m=this.createDataElementFromNumbers(v,r);if(t.push(...m),Array.isArray(e)&&e.length>0){let g=this.createDataElementFromNumbers(v,r);t.push(...g)}}return a[1]=t.reduce((m,g)=>m+g.byteLength,0)-8,t}createCharArray(n,r){let e=[],t=new Uint32Array(2);t[0]=14,e.push(t);let l=this.createDataElementFromNumbers(6,[(0<<8)+4,0]);e.push(...l);let h=r[0].length;r.forEach(f=>{f.length>h&&(h=f.length)});let u=this.createDataElementFromNumbers(5,[r.length,h]);e.push(...u);let s=this.createDataElementFromTypedArray(this.stringToUtf8(n),1);e.push(...s);let v=new Uint8Array(r.length*h),m=r.map(f=>this.stringToUtf8(f)),g=0;for(let f=0;f<h;f++)for(let T=0;T<r.length;T++)v[g]=f<m[T].length?m[T][f]:32,g++;let A=this.createDataElementFromTypedArray(v,16);return e.push(...A),t[1]=e.reduce((f,T)=>f+T.byteLength,0)-8,e}createCharArrayUtf16(n,r){let e=[],t=new Uint32Array(2);t[0]=14,e.push(t);let l=this.createDataElementFromNumbers(6,[(0<<8)+4,0]);e.push(...l);let h=r[0].length;r.forEach(A=>{A.length>h&&(h=A.length)});let u=this.createDataElementFromNumbers(5,[r.length,h]);e.push(...u);let s=this.createDataElementFromTypedArray(this.stringToUtf8(n),1);e.push(...s);let v=new Uint16Array(r.length*h),m=0;for(let A=0;A<h;A++)for(let f=0;f<r.length;f++)v[m]=A<r[f].length?r[f].charCodeAt(A):32,m++;let g=this.createDataElementFromTypedArray(v,17);return e.push(...g),t[1]=e.reduce((A,f)=>A+f.byteLength,0)-8,e}createCellArray(n,r){let e=[],t=new Uint32Array(2);t[0]=14,e.push(t);let l=this.createDataElementFromNumbers(6,[(0<<8)+1,0]);e.push(...l);let h=this.createDataElementFromNumbers(5,[1,r.length]);e.push(...h);let u=this.createDataElementFromTypedArray(this.stringToUtf8(n),1);return e.push(...u),r.forEach(s=>{Array.isArray(s)?e.push(...this.createMatArray(s)):e.push(...this.createMatArray([s]))}),t[1]=e.reduce((s,v)=>s+v.byteLength,0)-8,e}allObjectsHaveTheSameKeys(n){let r=Object.keys(n[0]).sort();for(let e=1;e<n.length;e++){let t=Object.keys(n[e]).sort();if(r.length!=t.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!=t[a])return!1}return!0}allElementsHaveTheSameType(n){function r(t){let a=typeof t;return a=="object"&&(a=t.constructor.name),a}let e=r(n[0]);for(let t=1;t<n.length;t++)if(e!=r(n[t]))return!1;return!0}isTypedArray(n){return["Int8Array","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","BigInt64Array","BigUint64Array","Float32Array","Float64Array"].includes(n.constructor.name)}createMatArray(n,r="",e=!1){let t;Array.isArray(n)||this.isTypedArray(n)?t=n:t=[n];let a=[];if(this.isTypedArray(t))a=this.createNumericArray(r,t);else if(t.length==1&&this.isTypedArray(t[0]))a=this.createNumericArray(r,t[0]);else{let o=this.allElementsHaveTheSameType(t);o&&typeof t[0]=="number"?a=this.createNumericArray(r,t):o&&typeof t[0]=="string"?t.length==1?a=this.createCharArray(r,t):a=this.createCellArray(r,t):o&&t[0].constructor.name=="Object"&&this.allObjectsHaveTheSameKeys(t)?a=this.createStructArray(r,t):a=this.createCellArray(r,t)}return e&&this.compressionEnabled?this.createZippedArray(a):a}createStructArray(n,r){let e=[],t=new Uint32Array(2);t[0]=14,e.push(t);let l=this.createDataElementFromNumbers(6,[(0<<8)+2,0]);e.push(...l);let h=this.createDataElementFromNumbers(5,[1,r.length]);e.push(...h);let u=this.createDataElementFromTypedArray(this.stringToUtf8(n),1);e.push(...u);let s=Object.keys(r[0]),v=Math.max(...s.map(f=>f.length))+1,m=this.createDataElementFromNumbers(5,[v]);e.push(...m);let g=s.map(f=>this.stringToUtf8(f.padEnd(v,"\0"))),A=this.createDataElementFromTypedArray(g,1);return e.push(...A),r.forEach(f=>{s.forEach(T=>{let E=f[T];Array.isArray(E)?e.push(...this.createMatArray(E)):e.push(...this.createMatArray([E]))})}),t[1]=e.reduce((f,T)=>f+T.byteLength,0)-8,e}createZippedArray(n){let r=new Uint8Array(n.reduce((o,l)=>o+l.byteLength,0)),e=0;for(let o of n)r.set(new Uint8Array(o.buffer),e),e+=o.byteLength;let t=Dr(r,{level:6}),a=new Uint32Array(2);return a[0]=15,a[1]=t.byteLength,[a,t]}getBlob(){return new Blob(this.matFile)}};})();
